(this["webpackJsonpaac-app"]=this["webpackJsonpaac-app"]||[]).push([[0],{76:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(33),s=c.n(a),i=c(18),j=c.n(i),l=c(24),o=c(9),u=c(88),b=c(82),d=c(85),O=c(83),p=c(29),x=c(40),h=(c(66),c(78),c(79),x.a.initializeApp({apiKey:"AIzaSyCN9j4OE2GQrawAlL487toMIwHqFUCWcdE",authDomain:"aac-login-development.firebaseapp.com",projectId:"aac-login-development",storageBucket:"aac-login-development.appspot.com",messagingSenderId:"617060536324",appId:"1:617060536324:web:067135919304008eb92551"})),m=h.firestore(),f={text:m.collection("text"),files:m.collection("files"),formatDoc:function(e){return Object(p.a)({id:e.id},e.data())},getCurrentTimestamp:x.a.firestore.FieldValue.serverTimestamp},g=(h.storage(),h.auth()),v=x.a.storage(),w=x.a.firestore(),y=x.a.firestore.FieldValue.serverTimestamp,C=c(2),N=n.a.createContext();function S(){return Object(r.useContext)(N)}function A(e){var t=e.children,c=Object(r.useState)(),n=Object(o.a)(c,2),a=n[0],s=n[1],i=Object(r.useState)(!0),j=Object(o.a)(i,2),l=j[0],u=j[1];Object(r.useEffect)((function(){return g.onAuthStateChanged((function(e){s(e),u(!1)}))}),[]);var b={currentUser:a,login:function(e,t){return g.signInWithEmailAndPassword(e,t)},signup:function(e,t){return g.createUserWithEmailAndPassword(e,t)},logout:function(){return g.signOut()},resetPassword:function(e){return g.sendPasswordResetEmail(e)},updateEmail:function(e){return a.updateEmail(e)},updatePassword:function(e){return a.updatePassword(e)}};return Object(C.jsx)(N.Provider,{value:b,children:!l&&t})}var P=c(12),k=c(14),E=c(81);function U(e){var t=e.children;return Object(C.jsx)(E.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(C.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:t})})}var F=c.p+"static/media/AACapp-logo.1b6e952e.svg";function I(){var e=Object(r.useRef)(),t=Object(r.useRef)(),c=Object(r.useRef)(),n=S().signup,a=Object(r.useState)(""),s=Object(o.a)(a,2),i=s[0],p=s[1],x=Object(r.useState)(!1),h=Object(o.a)(x,2),m=h[0],f=h[1],g=Object(P.g)();function v(){return(v=Object(l.a)(j.a.mark((function r(a){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),t.current.value===c.current.value){r.next=3;break}return r.abrupt("return",p("Passwords do not match"));case 3:return r.prev=3,p(""),f(!0),r.next=8,n(e.current.value,t.current.value);case 8:g.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),p("Failed to create an account");case 14:f(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))).apply(this,arguments)}return Object(C.jsxs)(U,{children:[Object(C.jsx)("img",{src:F,className:"main-logo",alt:"AAC App logo",style:{justifyContent:"center",textAlign:"center"}}),Object(C.jsx)(u.a,{children:Object(C.jsxs)(u.a.Body,{children:[Object(C.jsx)("h3",{className:"text-center mb-4",children:"Create your account"}),i&&Object(C.jsx)(b.a,{variant:"danger",children:i}),Object(C.jsxs)(d.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(C.jsx)(d.a.Group,{id:"email",children:Object(C.jsx)(d.a.Control,{type:"email",ref:e,required:!0,placeholder:"Email"})}),Object(C.jsx)(d.a.Group,{id:"password",children:Object(C.jsx)(d.a.Control,{type:"password",ref:t,required:!0,placeholder:"Password"})}),Object(C.jsx)(d.a.Group,{id:"password-confirm",children:Object(C.jsx)(d.a.Control,{type:"password",ref:c,required:!0,placeholder:"Password Confirmation"})}),Object(C.jsx)(O.a,{disabled:m,className:"w-100",type:"submit",children:"Sign Up"})]})]})}),Object(C.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(C.jsx)(k.b,{to:"/login",children:"Log In"})]})]})}function R(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1],a=S(),s=a.currentUser,i=a.logout,d=Object(P.g)();function p(){return(p=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,i();case 4:d.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(C.jsxs)(U,{children:[Object(C.jsx)("img",{src:F,className:"main-logo",alt:"AAC App logo",style:{justifyContent:"center",textAlign:"center"}}),Object(C.jsx)(u.a,{children:Object(C.jsxs)(u.a.Body,{children:[Object(C.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),c&&Object(C.jsx)(b.a,{variant:"danger",children:c}),Object(C.jsx)("strong",{children:"Email:"})," ",s.email,Object(C.jsx)(k.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(C.jsx)("div",{className:"w-100 text-center mt-2",children:Object(C.jsx)(O.a,{variant:"link",onClick:function(){return p.apply(this,arguments)},children:"Log Out"})})]})}function G(){var e=Object(r.useRef)(),t=Object(r.useRef)(),c=S().login,n=Object(r.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],p=Object(r.useState)(!1),x=Object(o.a)(p,2),h=x[0],m=x[1],f=Object(P.g)();function g(){return(g=Object(l.a)(j.a.mark((function r(n){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,i(""),m(!0),r.next=6,c(e.current.value,t.current.value);case 6:f.push("/"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),i("Failed to log in");case 12:m(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return Object(C.jsxs)(U,{children:[Object(C.jsx)("img",{src:F,className:"main-logo",alt:"AAC App logo",style:{justifyContent:"center",textAlign:"center"}}),Object(C.jsx)("h1",{className:"site-title",children:"Welcome to AACapp"}),Object(C.jsx)("h3",{className:"tagline",children:"Improving Conversation Structure"}),Object(C.jsx)(u.a,{children:Object(C.jsxs)(u.a.Body,{children:[s&&Object(C.jsx)(b.a,{variant:"danger",children:s}),Object(C.jsxs)(d.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(C.jsx)(d.a.Group,{id:"email",children:Object(C.jsx)(d.a.Control,{type:"email",ref:e,required:!0,placeholder:"Email"})}),Object(C.jsx)(d.a.Group,{id:"password",children:Object(C.jsx)(d.a.Control,{type:"password",ref:t,required:!0,placeholder:"Password"})}),Object(C.jsx)(O.a,{disabled:h,className:"w-100",type:"submit",children:"Log In"})]}),Object(C.jsx)("div",{className:"w-100 text-center mt-3",children:Object(C.jsx)(k.b,{to:"/forgot-password",children:"Forgot Password?"})})]})}),Object(C.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(C.jsx)(k.b,{to:"/signup",children:"Sign Up"})]})]})}var q=c(60);function B(e){var t=e.component,c=Object(q.a)(e,["component"]),r=S().currentUser;return Object(C.jsx)(P.b,Object(p.a)(Object(p.a)({},c),{},{render:function(e){return r?Object(C.jsx)(t,Object(p.a)({},e)):Object(C.jsx)(P.a,{to:"/login"})}}))}function D(){var e=Object(r.useRef)(),t=S().resetPassword,c=Object(r.useState)(""),n=Object(o.a)(c,2),a=n[0],s=n[1],i=Object(r.useState)(""),p=Object(o.a)(i,2),x=p[0],h=p[1],m=Object(r.useState)(!1),f=Object(o.a)(m,2),g=f[0],v=f[1];function w(){return(w=Object(l.a)(j.a.mark((function c(r){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),c.prev=1,h(""),s(""),v(!0),c.next=7,t(e.current.value);case 7:h("An email has been sent to your inbox, please check for further instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),s("Failed to reset password");case 13:v(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(C.jsxs)(U,{children:[Object(C.jsx)("img",{src:F,className:"main-logo",alt:"AAC App logo",style:{justifyContent:"center",textAlign:"center"}}),Object(C.jsx)(u.a,{children:Object(C.jsxs)(u.a.Body,{children:[Object(C.jsx)("h3",{className:"text-center mb-4",children:"Enter email to reset password"}),a&&Object(C.jsx)(b.a,{variant:"danger",children:a}),x&&Object(C.jsx)(b.a,{variant:"success",children:x}),Object(C.jsxs)(d.a,{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(C.jsx)(d.a.Group,{id:"email",children:Object(C.jsx)(d.a.Control,{type:"email",ref:e,required:!0,placeholder:"Email"})}),Object(C.jsx)(O.a,{disabled:g,className:"w-100",type:"submit",children:"Reset Your Password"})]}),Object(C.jsx)("div",{className:"w-100 text-center mt-3",children:Object(C.jsx)(k.b,{to:"/login",children:"Login"})})]})}),Object(C.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(C.jsx)(k.b,{to:"/signup",children:"Sign Up"})]})]})}function L(){var e=Object(r.useRef)(),t=Object(r.useRef)(),c=Object(r.useRef)(),n=S(),a=n.currentUser,s=n.updatePassword,i=n.updateEmail,j=Object(r.useState)(""),l=Object(o.a)(j,2),p=l[0],x=l[1],h=Object(r.useState)(!1),m=Object(o.a)(h,2),f=m[0],g=m[1],v=Object(P.g)();return Object(C.jsxs)(U,{children:[Object(C.jsx)("img",{src:F,className:"main-logo",alt:"AAC App logo",style:{justifyContent:"center",textAlign:"center"}}),Object(C.jsx)(u.a,{children:Object(C.jsxs)(u.a.Body,{children:[Object(C.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),p&&Object(C.jsx)(b.a,{variant:"danger",children:p}),Object(C.jsxs)(d.a,{onSubmit:function(r){if(r.preventDefault(),t.current.value!==c.current.value)return x("Passwords do not match");var n=[];g(!0),x(""),e.current.value!==a.email&&n.push(i(e.current.value)),t.current.value&&n.push(s(t.current.value)),Promise.all(n).then((function(){v.push("/user")})).catch((function(){x("Failed to update account")})).finally((function(){g(!1)}))},children:[Object(C.jsx)(d.a.Group,{id:"email",children:Object(C.jsx)(d.a.Control,{type:"email",ref:e,required:!0,defaultValue:a.email,placeholder:"Update email"})}),Object(C.jsx)(d.a.Group,{id:"password",children:Object(C.jsx)(d.a.Control,{type:"password",ref:t,placeholder:"Enter new password"})}),Object(C.jsx)(d.a.Group,{id:"password-confirm",children:Object(C.jsx)(d.a.Control,{type:"password",ref:c,placeholder:"Re-enter new password"})}),Object(C.jsx)(O.a,{disabled:f,className:"w-100",type:"submit",children:"Update"})]})]})}),Object(C.jsx)("div",{className:"w-100 text-center mt-2",children:Object(C.jsx)(k.b,{to:"/user",children:"Cancel"})})]})}var T=c(87),W=c(86),z=c(84),H=function(e){var t=Object(r.useState)(0),c=Object(o.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(null),i=Object(o.a)(s,2),u=i[0],b=i[1],d=Object(r.useState)(null),O=Object(o.a)(d,2),p=O[0],x=O[1];return Object(r.useEffect)((function(){var t=v.ref(e.name),c=w.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;a(t)}),(function(e){b(e)}),Object(l.a)(j.a.mark((function e(){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return r=e.sent,n=y(),e.next=6,c.add({url:r,createdAt:n});case 6:x(r);case 7:case"end":return e.stop()}}),e)}))))}),[e]),{progress:n,url:p,error:u}},V=function(e){var t=e.file,c=e.setFile,n=H(t),a=n.progress,s=n.url;return Object(r.useEffect)((function(){s&&c(null)}),[s,c]),Object(C.jsx)("div",{className:"progress-bar",style:{width:a+"%"}})};function J(e){var t=e.currentFolder,c=Object(r.useState)(!1),n=Object(o.a)(c,2),a=n[0],s=n[1],i=Object(r.useState)(""),j=Object(o.a)(i,2),l=j[0],u=j[1],b=Object(r.useState)(null),p=Object(o.a)(b,2),x=p[0],h=p[1],m=S().currentUser,g=Object(r.useState)(null),v=Object(o.a)(g,2),w=v[0],y=v[1];function N(){s(!1),u("")}var A=["image/png","image/jpeg"];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(O.a,{onClick:function(){s(!0)},size:"sm",className:"site-button add-button",children:"Add"}),Object(C.jsx)(z.a,{show:a,onHide:N,children:Object(C.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),null!=t&&f.text.add({name:l,parentID:t.id,userId:m.uid,createdAt:f.getCurrentTimestamp()})},children:[Object(C.jsxs)(z.a.Body,{children:[Object(C.jsxs)(d.a.Group,{children:[Object(C.jsx)(d.a.Label,{children:"Enter Symbol Name"}),Object(C.jsx)(d.a.Control,{type:"text",required:!0,value:l,onChange:function(e){return u(e.target.value)}})]}),Object(C.jsxs)(d.a.Group,{children:[Object(C.jsx)(d.a.Label,{children:"Upload Symbol Image"}),Object(C.jsx)(d.a.Control,{type:"file",required:!0,onChange:function(e){var t=e.target.files[0];t&&A.includes(t.type)?(h(t),y("")):(h(null),y("Please select an image file (png or jpeg)"))}}),Object(C.jsxs)("div",{className:"output",children:[w&&Object(C.jsx)("div",{className:"error",children:w}),x&&Object(C.jsx)("div",{children:x.name}),x&&Object(C.jsx)(V,{file:x,setFile:h})]})]})]}),Object(C.jsxs)(z.a.Footer,{children:[Object(C.jsx)(O.a,{variant:"secondary",onClick:N,children:"Close"}),Object(C.jsx)(O.a,{variant:"success",type:"submit",children:"Submit"})]})]})})]})}function M(){return Object(C.jsxs)(T.a,{bg:"light",expand:"sm",children:[Object(C.jsx)(T.a.Brand,{as:k.b,to:"/",children:"AACapp"}),Object(C.jsx)(W.a,{children:Object(C.jsx)(W.a.Link,{as:k.b,to:"/",onClick:function(){window.location.reload(!1)},className:"site-button refresh-button",children:"Refresh"})}),Object(C.jsx)(J,{}),Object(C.jsx)(W.a,{children:Object(C.jsx)(W.a.Link,{as:k.b,to:"/user",className:"site-button profile-button",children:"Profile"})})]})}var K=function(e){var t=Object(r.useState)([]),c=Object(o.a)(t,2),n=c[0],a=c[1];return Object(r.useEffect)((function(){var t=w.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(p.a)(Object(p.a)({},e.data()),{},{id:e.id}))})),a(t)}));return function(){return t()}}),[e]),{docs:n}},Q=function(e){e.setSelectedImg;var t=K("images").docs;return Object(C.jsx)("div",{className:"img-grid",children:t&&t.map((function(e){return Object(C.jsx)("div",{className:"img-wrap",children:Object(C.jsx)("img",{src:e.url,alt:"User Uploaded Symbol"})},e.id)}))})},Y=function(e){e.setSelectedImg;var t=K("images").docs;return Object(C.jsx)("div",{className:"img-wrap",children:t&&t.map((function(e){return Object(C.jsx)("div",{className:"img-section",children:Object(C.jsx)("img",{src:e.url,alt:"uploaded pic"})},e.id)}))})},_=function(){return Object(C.jsx)("div",{className:"rect"})},X=function(){return Object(C.jsxs)("div",{className:"select-subject-panel",children:[Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{})]})},Z=function(){return Object(C.jsxs)("div",{className:"select-verb-panel",children:[Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{})]})},$=function(){return Object(C.jsxs)("div",{className:"select-object-panel",children:[Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{}),Object(C.jsx)(_,{})]})};function ee(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M,{}),Object(C.jsxs)(E.a,{fluid:!0,children:[Object(C.jsx)(X,{children:Object(C.jsx)(Q,{children:Object(C.jsx)(Y,{})})}),Object(C.jsx)(Z,{}),Object(C.jsx)($,{})]})]})}var te=function(){return Object(C.jsx)(k.a,{children:Object(C.jsx)(A,{children:Object(C.jsxs)(P.d,{children:[Object(C.jsx)(B,{exact:!0,path:"/",component:ee}),Object(C.jsx)(B,{path:"/user",component:R}),Object(C.jsx)(B,{path:"/update-profile",component:L}),Object(C.jsx)(P.b,{path:"/signup",component:I}),Object(C.jsx)(P.b,{path:"/login",component:G}),Object(C.jsx)(P.b,{path:"/forgot-password",component:D})]})})})};c(75),c(76);s.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(te,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.2e0da864.chunk.js.map